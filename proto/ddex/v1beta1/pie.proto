syntax = "proto3";

package ddex.v1beta1;

import "ddex/v1beta1/common.proto";
import "ddex/v1beta1/party.proto";

option go_package = "github.com/AudiusProject/audiusd/pkg/api/ddex/v1beta1";

// Party Identification and Enrichment (PIE) message from the DDEX standard
message PieMessage {
  message PartyList {
    repeated Party party = 1;
  }

  message Party {
    message PartyType {
      string value = 1;
    }
    string party_reference = 1;
    ddex.v1beta1.Party.PartyId party_id = 2;
    ddex.v1beta1.Party.PartyName party_name = 3;
    PartyType party_type = 4;
    repeated Enrichment enrichment = 5;
  }

  message Enrichment {
    oneof enrichment {
      Handle handle = 1;
      Verified verified = 2;
    }
  }

  message Handle {
    // "audius" or "twitter"
    string type = 1;
    // the handle value, e.g. "audius_user_id" or "twitter_handle"
    string value = 2;
  }

  message Verified {
    // "audius" or "twitter"
    string type = 1;
    // true if the handle is verified, false otherwise
    bool verified = 2;
  }

  ddex.v1beta1.MessageHeader message_header = 1;
  PartyList party_list = 2;
}
